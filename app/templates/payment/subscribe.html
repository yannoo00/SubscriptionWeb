<!DOCTYPE html>
<html>
<head>
    <title>구독하기</title>
    <script src="https://js.tosspayments.com/v1"></script>
</head>
<body>
    <h1>구독하기</h1>
    <button id="payment-button">구독하기</button>

    <script>
        var clientKey = '{{ client_key }}';
        var tossPayments = TossPayments(clientKey);
        var button = document.getElementById('payment-button');

        button.addEventListener('click', function () {
            tossPayments.requestPayment('카드', {
                amount: 10000,
                orderId: 'order_' + new Date().getTime(),
                orderName: '월간 구독',
                customerName: '{{ current_user.name }}',
                successUrl: window.location.origin + '/payments/complete',
                failUrl: window.location.origin + '/payments/fail'
            });
        });
    </script>
</body>
</html>